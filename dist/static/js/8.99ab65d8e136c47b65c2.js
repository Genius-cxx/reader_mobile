webpackJsonp([8],{"5dHJ":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("3cXf"),s=o.n(a),i=o("4YfN"),n=o.n(i),r=o("48sp"),l=o("P9l9"),c={data:function(){return{title:"书籍详情",book:{},upDate:0,comments:[],sUrl:"http://statics.zhuishushenqi.com",flag:!1,fontSize:18,fontColor:"#5c5d58",background:"#eee6dd",readePattern:0,pagingPattern:0}},computed:{imgUrl:function(){return this.sUrl}},created:function(){this.getBook(this.$route.params.id),this.getComments(this.$route.params.id)},watch:{$route:function(t,e){this.getBook(t.params.id),this.getComments(t.params.id)}},methods:n()({latelyFollower:function(t){return t>1e4?(t/1e4).toFixed(1):t},latelyCount:function(t){return t>1e4?(t/1e4).toFixed()+"万字":t+"字"},getBook:function(t){var e=this;Object(l.b)(t).then(function(t){e.book=t.data,e.upDate=e._time(e.book.updated),e.isFlag(),e.setBook(e.book)})},_unEscape:function(t){return t=unescape(t).replace("/agent/","")},_time:function(t){var e=Math.round(new Date/1e3);return t=new Date(t).getTime()/1e3,Math.floor((e-t)%86400/3600)},getComments:function(t){var e=this;Object(l.c)(t).then(function(t){t.data.ok&&(e.comments=t.data.reviews)})},isFlag:function(){var t=JSON.parse(window.localStorage.getItem("book"));this.flag=!(!t||!t[this.book._id])},setBookLocalStorage:function(){var t=JSON.parse(window.localStorage.getItem("book"))?JSON.parse(window.localStorage.getItem("book")):{};this.flag?(delete t[this.book._id],window.localStorage.setItem("book",s()(t)),this.flag=!this.flag):(t[this.book._id]={cover:this.book.cover,title:this.book.title,id:this.book._id,chapterIndexCache:0,bookSource:0,pageIndexCache:0},window.localStorage.setItem("book",s()(t)),this.flag=!this.flag)},setUserLocalStorage:function(){var t=JSON.parse(window.localStorage.getItem("userSet"))?JSON.parse(window.localStorage.getItem("userSet")):{};t.color||(t={fontSize:this.fontSize,background:this.background,color:this.fontColor,readePattern:this.readePattern,pagingPattern:this.pagingPattern},window.localStorage.setItem("userSet",s()(t)))},goReadBooks:function(){this.$router.push({path:"/readBook/"+this.$route.params.id+"/"})}},Object(r.c)({setBook:"SET_BOOK"}))},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"books-detail"},[o("mt-header",{staticClass:"book-header",attrs:{title:t.title}},[o("div",{attrs:{slot:"left"},on:{click:function(e){return t.$router.back(-1)}},slot:"left"},[o("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.book.title,expression:"book.title"}],staticClass:"book-detail"},[o("div",{staticClass:"cover"},[o("img",{attrs:{src:t._unEscape(t.book.cover),alt:""}})]),t._v(" "),o("div",{staticClass:"desc"},[o("h1",[t._v(t._s(t.book.title||"Fakin"))]),t._v(" "),o("p",{staticClass:"info"},[o("span",[t._v(t._s(t.book.author||"fakin"))]),t._v(" | "),o("span",[t._v(t._s(t.book.minorCate||0))]),t._v("\n          | "),o("span",[t._v(t._s(t.latelyCount(t.book.wordCount||0)))])]),t._v(" "),o("p",{staticClass:"update"},[t._v(" "+t._s(t.upDate>1?t.upDate+"小时前":60*t.upDate+"分钟前")+"更新")]),t._v(" "),o("p",[t._v(t._s(t.book.lastChapter))])])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.book.title,expression:"book.title"}],staticClass:"read-link"},[o("div",{staticClass:"sj",on:{click:function(e){return t.setBookLocalStorage()}}},[t._v(t._s(t.flag?"不追了":"追更新"))]),t._v(" "),o("div",{staticClass:"read",on:{click:function(e){t.goReadBooks(),t.setUserLocalStorage()}}},[t._v("开始阅读")])]),t._v(" "),o("div",{staticClass:"reader-data"},[o("p",{staticClass:"item"},[o("span",{staticClass:"key"},[t._v("追人气")]),t._v(" "),o("span",[t._v(t._s(t.latelyFollower(t.book.latelyFollower)||0)+"万")])]),t._v(" "),o("p",{staticClass:"item"},[o("span",{staticClass:"key"},[t._v("读者存留率")]),t._v(" "),o("span",[t._v(t._s(t.book.retentionRatio||0)+"%")])]),t._v(" "),o("p",{staticClass:"item"},[o("span",{staticClass:"key"},[t._v("日更字数/天")]),t._v(" "),o("span",[t._v(t._s(t.book.serializeWordCount||0))])])]),t._v(" "),o("div",{staticClass:"introduction"},[t._v("\n      "+t._s(t.book.longIntro)+"\n    ")]),t._v(" "),o("div",{staticClass:"comment"},[o("p",{staticClass:"comment-title"},[t._v("热门评论")]),t._v(" "),o("ul",t._l(t.comments,function(e){return o("li",{staticClass:"comment-list"},[o("div",{staticClass:"inner"},[o("div",{staticClass:"cover"},[o("img",{attrs:{src:t.imgUrl+e.author.avatar,alt:""}})]),t._v(" "),o("div",{staticClass:"right"},[o("p",{staticClass:"name"},[t._v(t._s(e.author.nickname))]),t._v(" "),o("p",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),o("p",{staticClass:"content"},[t._v(t._s(e.content))])])])])}),0)])],1)])},staticRenderFns:[]};var v=o("C7Lr")(c,d,!1,function(t){o("p9jY")},"data-v-43040b4a",null);e.default=v.exports},p9jY:function(t,e){}});
//# sourceMappingURL=8.99ab65d8e136c47b65c2.js.map