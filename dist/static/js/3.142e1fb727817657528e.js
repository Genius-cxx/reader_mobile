webpackJsonp([3],{fQ8W:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});e("miO0");var a=e("OTYB"),s=e.n(a),i=e("4YfN"),n=e.n(i),r=e("48sp"),l=e("eFLg"),c=e("P9l9"),d={data:function(){return{title:"",bookLists:[],allLoaded:!1,currentLoadPage:1,isSearch:!0,isLoadMore:!1}},computed:n()({},Object(r.b)(["search"])),created:function(){},methods:{_getBookLists:function(t){var o=this;s.a.open("加载中"),Object(c.l)(t).then(function(t){t.data.ok&&(o.bookLists=o._unEscape(o.normalizeBooks(t.data.books.slice(0,20))),(o.bookLists<=20||o.bookLists.length===t.data.books.length)&&(o.allLoaded=!0),s.a.close())})},_unEscape:function(t){for(var o=0;o<t.length;o++)t[o].cover=unescape(t[o].cover),t[o].cover=t[o].cover.replace("/agent/","");return t},loadBottom:function(){var t=this;this.isLoadMore=!0,s.a.open("加载中"),Object(c.l)(this.$route.query.val).then(function(o){o.data.ok&&((t.bookLists<=20||t.bookLists.length===o.data.books.length)&&(t.allLoaded=!0),t.bookLists=t._unEscape(t.normalizeBooks(o.data.books.slice(0,20*t.currentLoadPage+20))),t.currentLoadPage++,setTimeout(function(){s.a.close(),t.isLoadMore=!1},350))}),this.$refs.loadmore.onBottomLoaded()}},components:{BookList:l.a},beforeRouteEnter:function(t,o,e){e(function(t){t.title='跟"'+t.$route.query.val+'"有关的书籍',t._getBookLists(t.$route.query.val)})}},u={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"bookLists"},[e("mt-header",{staticClass:"book-header",attrs:{title:t.title}},[e("router-link",{attrs:{slot:"left",to:"/home"},slot:"left"},[e("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),t._v(" "),e("div",{ref:"load",staticClass:"load-more"},[e("mt-loadmore",{ref:"loadmore",attrs:{"bottom-method":t.loadBottom,"auto-fill":!1,"bottom-all-loaded":t.allLoaded}},[e("div",{staticClass:"book-list"},[t._l(t.bookLists,function(o,a){return e("book-list",{key:o._id,attrs:{book:o,isSearch:t.isSearch,isLoadMore:t.isLoadMore}})}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.bookLists.length,expression:"!bookLists.length"}],staticClass:"loading-container"},[e("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[t._v("没有找到更多书籍")])])],2)])],1)],1)},staticRenderFns:[]};var b=e("C7Lr")(d,u,!1,function(t){e("sthr")},"data-v-cd508658",null);o.default=b.exports},sthr:function(t,o){}});
//# sourceMappingURL=3.142e1fb727817657528e.js.map