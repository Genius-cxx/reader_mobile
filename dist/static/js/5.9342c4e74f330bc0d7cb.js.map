{"version":3,"sources":["webpack:///src/components/bookSelf/book-self.vue","webpack:///./src/components/bookSelf/book-self.vue?6c66","webpack:///./src/components/bookSelf/book-self.vue"],"names":["book_self","data","books","option","value","isShowCheck","created","this","getBooks","methods","goAdd","$router","push","path","bookIdArray","localShelf","JSON","parse","window","localStorage","getItem","i","cover","_unEscape","str","unescape","replace","showCheck","check","$refs","checklist","delete","style","opacity","length","$el","display","hideCheck","deleteBooks","arr","storage","forEach","item","index","setItem","stringify_default","location","reload","goReadBooks","id","bookSelf_book_self","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","slot","to","icon","_v","directives","name","rawName","expression","ref","on","click","type","_l","book","$event","refInFor","staticStyle","options","model","callback","$$v","src","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.9342c4e74f330bc0d7cb.js","sourcesContent":["<template>\n  <div class=\"myBooks\">\n    <mt-header title=\"我的书架\" class=\"book-header\">\n      <router-link to=\"/home\" slot=\"left\">\n        <mt-button icon=\"back\">返回</mt-button>\n      </router-link>\n      <mt-button slot=\"right\" @click=\"showCheck\" class=\"btn\" ref=\"Btn\" v-show=\"books.length\">编辑</mt-button>\n    </mt-header>\n    <div class=\"addBooks\" v-show=\"books.length<8\">\n      <mt-button type=\"primary\" @click=\"goAdd\">去添加</mt-button>\n    </div>\n    <div class=\"book-list\">\n      <div class=\"book-item\" v-for=\"(book,index) in books\" @click=\"goReadBooks(book.id)\">\n        <mt-checklist :options=\"[option[index]]\" v-model=\"value\" ref=\"checklist\" style=\"display: none\" class=\"check\">\n        </mt-checklist>\n        <div class=\"cover\">\n          <img :src=\"_unEscape(book.cover)\">\n        </div>\n        <p class=\"name\">{{book.title}}</p>\n      </div>\n    </div>\n    <div class=\"delete\" ref=\"delete\" style=\"opacity: 0\">\n      <mt-button type=\"primary\" class=\"deleteBtn\" ref=\"deleteBtn\" @click=\"deleteBooks\">删除({{value.length}})\n      </mt-button>\n      <mt-button type=\"default\" class=\"deleteBtn\" ref=\"qxBtn\" @click=\"hideCheck\">取消</mt-button>\n    </div>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n  export default{\n    data(){\n      return {\n        books: [],\n        option: [],\n        value: [],\n        isShowCheck: false\n      }\n    },\n    created(){\n      this.getBooks();\n    },\n    methods: {\n      goAdd(){\n        this.$router.push({\n          path: '/categories'\n        })\n      },\n      getBooks(){\n        let bookIdArray = [];\n        let localShelf = JSON.parse(window.localStorage.getItem('book')) ? JSON.parse(window.localStorage.getItem('book')) : {};\n        for (let i in localShelf) {\n          localShelf[i].cover = this._unEscape(localShelf[i].cover)\n          this.books.push(localShelf[i])\n          bookIdArray.push(i)\n\n        }\n        this.option = bookIdArray;\n      },\n      _unEscape(str){\n        str = unescape(str).replace(\"/agent/\", \"\")\n        return str\n      },\n      showCheck(){\n        this.isShowCheck = true;\n        let check = this.$refs.checklist;\n        this.$refs.delete.style.opacity = 1;\n        for (let i = 0; i < check.length; i++) {\n          check[i].$el.style.display = 'block'\n        }\n      },\n      hideCheck(){\n        let check = this.$refs.checklist;\n        this.$refs.delete.style.opacity = 0;\n        for (let i = 0; i < check.length; i++) {\n          check[i].$el.style.display = 'none'\n        }\n        this.isShowCheck = false\n      },\n      deleteBooks(){\n        let arr = this.value;\n        let storage = window.localStorage;\n        let localShelf = JSON.parse(storage.getItem('book')) ? JSON.parse(storage.getItem('book')) : {};\n        arr.forEach((item, index) => {\n          delete localShelf[arr[index]]\n        });\n        storage.setItem('book', JSON.stringify(localShelf))\n        window.location.reload()\n      },\n      goReadBooks(id){\n        if (this.isShowCheck) {\n          return\n        }\n        this.$router.push({\n          path: `/readBook/${id}`\n        })\n\n\n      }\n    },\n  }\n</script>\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n\n  @import '../../assets/style/my-mint.styl'\n  .myBooks\n    position fixed\n    width 100%\n    height 100%\n    top 0\n    left 0\n    right 0\n    bottom 0\n    background #fff\n    overflow-y scroll\n    max-width: 750px; /*no*/\n    margin: 0 auto;\n    .book-header\n      height 100px\n      line-height 100px\n      font-size 25px\n      background #409eff\n      width 100%\n      z-index 10\n    .addBooks\n      position absolute\n      width 200px\n      height 80px\n      left 50%\n      top 60%\n      z-index 200\n      background #409eff\n      margin-left -100px\n      margin-top -80px\n      font-size 25px\n      border-radius 15px\n      button\n        width 100%\n        height 100%\n    .book-list\n      padding 20px\n      box-sizing border-box\n      overflow hidden\n      .book-item\n        float left\n        width 25%\n        overflow hidden\n        padding-right 15px\n        box-sizing border-box\n        text-align center\n        margin-bottom 20px\n        position relative\n        &:nth-child(4n)\n          padding-right 0\n        .cover\n          width 100%\n          background: url('../../assets/images/default.jpg') no-repeat\n          background-position 50%\n          background-size 100%\n          img\n            width 100%\n            height 200px\n        .name\n          width 100%\n          margin-top 10px\n          font-size 25px\n          white-space nowrap\n          overflow hidden\n          text-overflow ellipsis\n\n  .btn\n    margin-right 10px\n\n  .check\n    position absolute\n    left 0\n    top 0\n    width 100%;\n    height 100%\n    text-align left\n\n  .delete\n    position absolute\n    width 100%\n    height 80px\n    bottom 0\n    left 0\n    display flex\n    .deleteBtn\n      flex 1\n      height 80px\n      box-sizing border-box\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/bookSelf/book-self.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myBooks\"},[_c('mt-header',{staticClass:\"book-header\",attrs:{\"title\":\"我的书架\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"/home\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('mt-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.books.length),expression:\"books.length\"}],ref:\"Btn\",staticClass:\"btn\",attrs:{\"slot\":\"right\"},on:{\"click\":_vm.showCheck},slot:\"right\"},[_vm._v(\"编辑\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.books.length<8),expression:\"books.length<8\"}],staticClass:\"addBooks\"},[_c('mt-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goAdd}},[_vm._v(\"去添加\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"book-list\"},_vm._l((_vm.books),function(book,index){return _c('div',{staticClass:\"book-item\",on:{\"click\":function($event){return _vm.goReadBooks(book.id)}}},[_c('mt-checklist',{ref:\"checklist\",refInFor:true,staticClass:\"check\",staticStyle:{\"display\":\"none\"},attrs:{\"options\":[_vm.option[index]]},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_vm._v(\" \"),_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm._unEscape(book.cover)}})]),_vm._v(\" \"),_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(book.title))])],1)}),0),_vm._v(\" \"),_c('div',{ref:\"delete\",staticClass:\"delete\",staticStyle:{\"opacity\":\"0\"}},[_c('mt-button',{ref:\"deleteBtn\",staticClass:\"deleteBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.deleteBooks}},[_vm._v(\"删除(\"+_vm._s(_vm.value.length)+\")\\n    \")]),_vm._v(\" \"),_c('mt-button',{ref:\"qxBtn\",staticClass:\"deleteBtn\",attrs:{\"type\":\"default\"},on:{\"click\":_vm.hideCheck}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-ca36e1b6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/bookSelf/book-self.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ca36e1b6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./book-self.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./book-self.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./book-self.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ca36e1b6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./book-self.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ca36e1b6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/bookSelf/book-self.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}